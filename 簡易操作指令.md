# Quick Command Reference (簡易操作指令)

This sheet lists the most common tasks for the project in a copy‑paste friendly order. Windows PowerShell 和 macOS/Linux 指令皆有列出。

## 1. Clone the repository
```powershell
# Windows PowerShell
git clone git@github.com:DDChen666/MTC-Flow-An-Experimentation-Engine-for-Multi-Task-Classification.git
cd MTC-Flow-An-Experimentation-Engine-for-Multi-Task-Classification
```
```bash
# macOS / Linux / WSL (zsh)
git clone git@github.com:DDChen666/MTC-Flow-An-Experimentation-Engine-for-Multi-Task-Classification.git
cd MTC-Flow-An-Experimentation-Engine-for-Multi-Task-Classification
```
> Check that SSH key 已設定 (或改用 HTTPS URL)。

## 2. Create & activate virtual environment
```powershell
python -m venv venv
.\venv\Scripts\Activate.ps1
```
```bash
python3 -m venv venv
source venv/bin/activate
```
> `python --version` 建議 ≥ 3.9。Prompt 開頭會出現 `(venv)` 表示成功。

## 3. Install dependencies
```powershell
pip install --upgrade pip
pip install -e .
```
Optional: `pip install -e .[develop]` 安裝 black、ruff 等開發工具。

## 4. Prepare dataset files
1. 預設資料夾：`input_train_and_test_json/`
2. 放入 `train_set_*.json` 與 `test_set_*.json`
3. 欄位需包含 `text`、`primary`、`secondary`（可在 `configs/default.yaml` 調整欄位名稱）。

若要自動切割資料，設定 `data.split.enabled: true` 並提供 `split.input_path`，再執行 `python -m src.main --stages split`。

## 5. Inspect available stages
```powershell
python -m src.main --config configs/default.yaml --list-stages
```
預設順序：`split → train → tune → stability`。`enabled: false` 的 stage 會自動跳過。

## 6. Run baseline training
```powershell
python -m src.main --config configs/default.yaml --stages train
```
- 全流程（依設定檔順序）：`python -m src.main --config configs/default.yaml`
- 先切資料再訓練：`python -m src.main --config configs/default.yaml --stages split train`

## 7. 查閱輸出結果
- 訓練輸出：`artifacts/training/<run_name>/`
- 超參數搜尋：`artifacts/tuning/`
- 穩定性評估：`artifacts/stability/`
- 日誌：`artifacts/pipeline.log`

## 8. Gradio 互動介面 (Interactive Demo)
```powershell
python gradio_app.py
```
- 介面會列出 `artifacts/training/` 內的所有 run，可自訂路徑。
- 上傳含 `text`、`primary`、`secondary` 的 JSON / JSONL / CSV，立刻得到 Primary/Secondary Accuracy、Macro F1、混淆矩陣與完整預測。
- 可下載預測 CSV 以進一步分析。

## 9. Git workflow
```powershell
git status
git add <file>
git commit -m "message"
git push origin <branch>
```
> 請勿將資料集、artifacts、venv 加入版本控制；`.gitignore` 已預設排除。

## 10. 快速排錯
- stage 沒執行？檢查 `configs/*.yaml` 的 `enabled`。
- 結果找不到？檢查 `artifacts` 目錄與 log。
- 發生錯誤？閱覽 `artifacts/pipeline.log`、`docs/quickstart.md`、README FAQ。

完成以上步驟即可跑通專案。如需更深入的教學，請參考《超詳細專案教學.md》。
